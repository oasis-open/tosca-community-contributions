tosca_definitions_version: tosca_2_0
# added capability_types but ubicity still gives error PJ 2025-11-12
data_types:
  scalar-unit.size:
    derived_from: scalar
    data_type: integer
    units:
      B: 1
      MB: 1000000

capability_types:
  Host:
    properties:
      num-cpus:
        type: integer
      mem-size:
        type: scalar-unit.size
      
relationship_types:
  HostedOn:
    description: >-
      Relationship to a host.

node_types:
  Compute:
    description: A compute node
    requirements:
      - host: 
          relationship: HostedOn
          capability: Host


# tag::s62[]
service_template:
  node_templates:
    my-node:
      type: Compute
      # other details omitted for brevity
      requirements:
        - host:
            node_filter:
              $and:
                - $in_range:
                  - $get_property: [ SELF, CAPABILITY, num-cpus ]
                  - [ 1, 4 ]
                - $greater_or_equal:
                  - $get_property: [ SELF, CAPABILITY, mem-size ]
                  - 512 MB 
# end::s62[]
